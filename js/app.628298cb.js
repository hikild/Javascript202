(function(e){function r(r){for(var a,c,s=r[0],i=r[1],u=r[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(r);while(p.length)p.shift()();return n.push.apply(n,u||[]),t()}function t(){for(var e,r=0;r<n.length;r++){for(var t=n[r],a=!0,s=1;s<t.length;s++){var i=t[s];0!==o[i]&&(a=!1)}a&&(n.splice(r--,1),e=c(c.s=t[0]))}return e}var a={},o={app:0},n=[];function c(r){if(a[r])return a[r].exports;var t=a[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=a,c.d=function(e,r,t){c.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,r){if(1&r&&(e=c(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)c.d(t,a,function(r){return e[r]}.bind(null,a));return t},c.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(r,"a",r),r},c.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=r,s=s.slice();for(var u=0;u<s.length;u++)r(s[u]);var l=i;n.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"034f":function(e,r,t){"use strict";var a=t("85ec"),o=t.n(a);o.a},"56d7":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("2b0e"),o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[t("h1",[e._v("Compras")]),t("el-form",{ref:"form",attrs:{inline:!0,rules:e.regras,model:e.registro}},[t("el-form-item",{attrs:{label:"Quantidade",prop:"quantidade"}},[t("el-input-number",{model:{value:e.registro.quantidade,callback:function(r){e.$set(e.registro,"quantidade",e._n(r))},expression:"registro.quantidade"}})],1),t("el-form-item",{attrs:{prop:"moeda",label:"Moeda"}},[t("el-select",{attrs:{placeholder:"escolha"},model:{value:e.registro.moeda,callback:function(r){e.$set(e.registro,"moeda",r)},expression:"registro.moeda"}},[t("el-option",{attrs:{label:"Dolares",value:"USD"}}),t("el-option",{attrs:{label:"Euros",value:"EUR"}}),t("el-option",{attrs:{label:"Libras",value:"GBP"}}),t("el-option",{attrs:{label:"Dolar Canadense",value:"CAD"}}),t("el-option",{attrs:{label:"Rubias",value:"RUB"}})],1)],1),t("el-form-item",{attrs:{label:"Data",prop:"dia"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"da compra"},model:{value:e.registro.dia,callback:function(r){e.$set(e.registro,"dia",r)},expression:"registro.dia"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.adicionar}},[e._v("Adicionar")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.compras,"default-sort":{prop:"dia",order:"descending"}}},[t("el-table-column",{attrs:{label:"Quantidade"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e.formatar(r.row.quantidade,r.row.moeda))+" ")]}}])}),t("el-table-column",{attrs:{prop:"moeda",label:"Moeda"}}),t("el-table-column",{attrs:{prop:"dia",label:"Data da Compras"}}),t("el-table-column",{attrs:{prop:"cotacaoCompra",label:"Valor na Compra"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e.formatar(r.row.cotacaoCompra,"BRL"))+" ")]}}])}),t("el-table-column",{attrs:{prop:"percHoje",label:"% Hoje"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e.formatar(r.row.percHoje))+" % ")]}}])}),t("el-table-column",{attrs:{label:"Valor de Hoje"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e.formatar(r.row.valorHoje,"BRL"))+" ")]}}])}),t("el-table-column",{attrs:{label:"Remover"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.remover(r.$index)}}},[e._v("remover")])]}}])})],1),t("h1",[e._v("Relatorio")]),t("el-row",{attrs:{gutter:12}},e._l(e.somatorio,(function(r){return t("el-col",{key:r.moeda,attrs:{span:8,offset:e.index>0?2:0}},[t("el-card",{attrs:{shadow:"hover"}},[t("h4",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v(" "+e._s(r.moeda)+" ")]),t("p",[e._v(" Soma: "+e._s(e.formatar(r.soma,"BRL"))),t("br"),e._v(" Cotação: "+e._s(e.formatar(r.cotacao,"BRL"))+" ")])])],1)})),1),t("h1",[e._v("Riquezas")]),t("h2",[e._v(e._s(e.formatar(this.riqueza,"BRL"))+" ")])],1)},n=[],c=(t("d81d"),t("a434"),t("d3b7"),t("07ac"),t("3ca3"),t("ddb0"),t("2b3d"),t("5530")),s=(t("96cf"),t("1da1")),i=t("b85c"),u={name:"app",data:function(){return{registro:{},compras:[],cotacoesHoje:{},regras:{quantidade:[{required:!0,type:"number",message:"Preencher",trigger:"blur"}],dia:[{type:"date",required:!0,message:"Preencher",trigger:"blur"}],moeda:[{required:!0,message:"Preencher",trigger:"change"}]}}},computed:{somatorio:function(){var e,r={},t=Object(i["a"])(this.compras);try{for(t.s();!(e=t.n()).done;){var a=e.value;r[a.moeda]||(r[a.moeda]={moeda:a.moeda,soma:0,cotacao:this.cotacoesHoje[a.moeda]}),r[a.moeda].soma+=a.valorHoje}}catch(n){t.e(n)}finally{t.f()}var o=Object.values(r);return o.sort((function(e,r){return e.soma-r.soma})),o},riqueza:function(){var e,r=0,t=Object(i["a"])(this.compras);try{for(t.s();!(e=t.n()).done;){var a=e.value;r+=a.valorHoje}}catch(o){t.e(o)}finally{t.f()}return this.formatar(r,"BRL")}},methods:{remover:function(e){this.compras.splice(e,1),this.salvar()},adicionar:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$refs.form.validate(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(t){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=11;break}return r.next=3,e.calcularCompra(e.registro);case 3:return a=r.sent,r.next=6,e.obterCotacao(a);case 6:o=r.sent,e.compras.push(o),e.registro={},e.$refs.form.resetFields(),e.salvar();case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},calcularCompra:function(e){return Object(s["a"])(regeneratorRuntime.mark((function r(){var t,a,o,n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t={base:e.moeda,symbols:"BRL"},a=e.dia.toISOString().substring(0,10),o="https://api.exchangeratesapi.io/".concat(a,"/?")+new URLSearchParams(t),n={mode:"cors",cache:"force-cache"},r.next=6,fetch(o,n).then((function(e){return e.json()}));case 6:return s=r.sent,i=s.rates[t.symbols],r.abrupt("return",Object(c["a"])(Object(c["a"])({},e),{},{dia:a,cotacaoCompra:i}));case 9:case"end":return r.stop()}}),r)})))()},obterCotacao:function(e){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,o,n,s,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.cotacoesHoje[e.moeda]){t.next=9;break}return a={base:e.moeda,symbols:"BRL"},o="https://api.exchangeratesapi.io/latest/?"+new URLSearchParams(a),n={mode:"cors",cache:"force-cache"},t.next=6,fetch(o,n).then((function(e){return e.json()}));case 6:s=t.sent,r.cotacoesHoje[e.moeda]=s.rates[a.symbols],console.log(r.cotacoesHoje);case 9:return i=e.quantidade*r.cotacoesHoje[e.moeda],u=r.cotacoesHoje[e.moeda]/e.cotacaoCompra*100,t.abrupt("return",Object(c["a"])(Object(c["a"])({},e),{},{percHoje:u,valorHoje:i}));case 12:case"end":return t.stop()}}),t)})))()},salvar:function(){var e=this.compras.map((function(e){var r=e.quantidade,t=e.moeda,a=e.dia,o=e.cotacaoCompra;return{quantidade:r,moeda:t,dia:a,cotacaoCompra:o}})),r=JSON.stringify(e);window.localStorage.setItem("compras",r)},formatar:function(e,r){return r?e.toLocaleString("pt-BR",{style:"currency",currency:r}):e.toLocaleString("pt-BR")}},beforeMount:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var t,a,o,n,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t=window.localStorage.getItem("compras"),t){r.next=3;break}return r.abrupt("return");case 3:a=JSON.parse(t),o=Object(i["a"])(a),r.prev=5,o.s();case 7:if((n=o.n()).done){r.next=15;break}return c=n.value,r.next=11,e.obterCotacao(c);case 11:s=r.sent,e.compras.push(s);case 13:r.next=7;break;case 15:r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](5),o.e(r.t0);case 20:return r.prev=20,o.f(),r.finish(20);case 23:case"end":return r.stop()}}),r,null,[[5,17,20,23]])})))()}},l=u,d=(t("034f"),t("2877")),p=Object(d["a"])(l,o,n,!1,null,null,null),f=p.exports,m=(t("0fae"),t("9e2f")),b=t.n(m),v=t("05af"),h=t.n(v),g=t("4897"),y=t.n(g);a["default"].use(b.a,{size:"small",zIndex:3e3}),y.a.use(h.a),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(f)}}).$mount("#app")},"85ec":function(e,r,t){}});
//# sourceMappingURL=app.628298cb.js.map